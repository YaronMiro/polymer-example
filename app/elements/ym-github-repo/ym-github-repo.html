<dom-module id="ym-github-repo">
  <style>
    :host {
      display: block;
    }

    input {
      width: 100%;
    }

  </style>
  <template>
    <span class="paper-font-body2">Fill the fields to get an info about the repository (only for public repositories)
    <br>
    <span>e.g: YaronMiro/AngularJS-UI-Router-Demo</span>
    </span>
    <!-- Listens for "input" event and sets the target repository to <input>.value -->
    <paper-input label="Owner" class="paper-font-body2" value="{{repository.owner::input}}"></paper-input>
    <paper-input label="Name" class="paper-font-body2" value="{{repository.name::input}}"></paper-input>
    <button onclick="getUrl">sss</button>
    <div>{{repository.owner}}/{{repository.name}}</div>
    <!-- Ajax call to Github API -->
    <!-- https://api.github.com/repos/YaronMiro/AngularJS-UI-Router-Demo -->
    <iron-ajax auto
        url="{{repository.owner}}"
        handle-as="json"
        last-response="{{githubResponse}}"></iron-ajax>

    <section>
      <div is="dom-if" if="{{githubResponse.id}}" class="info-wrapper">
        <a href="{{githubResponse.html_url}}">{{githubResponse.full_name}}</a>
        <iron-image style="width:100px; height:100px;" sizing="contain" src="{{githubResponse.owner.avatar_url}}"></iron-image>
      </div>
    </section>
  </template>

  <script>
    (function() {
      Polymer({
        is: 'ym-github-repo',
        listeners: {
          'error': 'error'
        },
        error: function(event, element) {
          console.log(event.);
          console.log(element);
        },
        ready: function() {
          console.log(this.repository);
        },
        properties: {
          repository: {
            type: Object,
            value: {
              owner: 'https://api.github.com/repos/YaronMiro/AngularJS-UI-Router-Demo',
              name: 'AngularJS-UI-Router-Demo'
            },
            notify: true
          }
        }
      });
    })();
  </script>

</dom-module>
