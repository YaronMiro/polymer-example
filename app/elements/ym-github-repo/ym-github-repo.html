<dom-module id="ym-github-repo">
  <style>
    :host {
      display: inline-block;
    }

    .info {
      list-style-type: none;
      padding: 0px;
    }

    .info li {

    }

    .info image {
      width:100px;
      height:100px
    }


    input {
      width: 100%;
    }

  </style>
  <template>

    <p>If we want to get this block then all we need to include on the html markup is the following element:</p>
    <div>
      <pre>
        <code>
          &lt;ym-github-repo&gt;&lt;/ym-github-repo&gt;
        </code>
      </pre>
    </div>

    <span class="paper-font-body2">Fill the fields to get an info about the repository (only for public repositories)
    <br>
    <span>e.g: Gizra/gizra</span>
    </span>
    <!-- Two-way binding for "<input>.value" -->
    <paper-input label="Owner" class="paper-font-body2" value="{{owner}}"></paper-input>
    <paper-input label="Name" class="paper-font-body2" value="{{name}}"></paper-input>
    <!---->
    <paper-button raised>
      <iron-icon icon="favorite"></iron-icon>
      custom button content
    </paper-button>

    <div>
      <span>{{url}}</span>
    </div>
    <!-- Ajax call to Github API -->
    <!-- https://api.github.com/repos/YaronMiro/AngularJS-UI-Router-Demo -->
    <iron-ajax auto
        id="ajax"
        url="{{url}}"
        handle-as="json"
        on-response="onResponse"
        on-error="onError"
        last-response="{{ajax.response}}"></iron-ajax>

    <section>
      <div class="info-wrapper">
        <!-- Repo info -->
        <ul class="info">
          <li>
            <div>owner: </div>
            <a href="{{ajax.response.owner.url}}">{{ajax.response.owner.login}}</a>
          </li>
          <li>
            <a href="{{ajax.response.html_url}}">{{ajax.response.name}}</a>
          </li>
          <li>Public repository</li>
          <li>Stars: <span>{{ajax.response.stargazers_count}}</span></li>
          <li><iron-image sizing="contain" src="{{ajax.response.owner.avatar_url}}"></iron-image></li>
          <li></li>
        </ul>
      </div>
    </section>
  </template>

  <script>
    (function() {

      Polymer({
        is: 'ym-github-repo',
        properties: {
          owner: {
            type: String,
            value: 'yaronMiro'
          },
          name: {
            type: String,
            value: 'AngularJS-UI-Router-Demo'
          },
          url: {
            type: String,
            computed: 'getUrl(owner, name)'
          },
          ajax: {
            type: Object,
            value: {
              response: {}
            }
          }
        },
        getUrl: function(owner, name) {
          return 'https://api.github.com/repos/' + owner + '/' + name;
        },
        onResponse: function(data, b) {
         console.log('From on-response', data);
         console.log('From on-response', b);
         console.log('From on-response', this.$);
        },
        onError: function(data, b) {
         console.log('From on-error', data);
          console.log('From on-response', b);
          console.log('From on-response', data);
        }
      });
    })();
  </script>

</dom-module>
